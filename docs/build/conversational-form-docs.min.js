var ConversationalForm=function(){function e(){}return e}(),ConversationalFormDocs=function(){function e(){this.introTimer=0,this.el=document.querySelector("main.content"),null!==document.getElementById("conversational-form-development")&&this.el.classList.add("development"),this.h1writer=new H1Writer({el:document.getElementById("writer")}),"none"!=window.getComputedStyle(document.getElementById("small-screen-menu")).getPropertyValue("display")?this.introFlow1():this.introFlow2()}return e.prototype.introFlow1=function(){var e=this,t=null!==document.getElementById("conversational-form-development");this.introTimer=setTimeout(function(){e.toggleMenuState(),e.h1writer.start(),e.introTimer=setTimeout(function(){e.toggleConversation()},t?0:2500)},t?0:500)},e.prototype.introFlow2=function(){var e=this,t=null!==document.getElementById("conversational-form-development");this.h1writer.start(),this.introTimer=setTimeout(function(){document.getElementById("info").classList.add("show"),e.introTimer=setTimeout(function(){document.querySelector("section[role='form']").classList.add("show"),document.getElementById("cf-toggle-btn").classList.add("show"),e.introTimer=setTimeout(function(){e.toggleConversation()},t?0:1500)},t?0:3e3)},t?0:1500)},e.prototype.toggleMenuState=function(){return this.el.classList.toggle("menu-toggle",!this.el.classList.contains("menu-toggle"))&&this.el.classList.remove("cf-toggle"),!1},e.prototype.toggleConversation=function(){var e=this;if(clearTimeout(this.introTimer),this.el.classList.contains("cf-toggle"))this.el.classList.remove("cf-toggle");else{if(!this.cf){var t=document.getElementById("cf-form"),n={},i=new window.cf.EventDispatcher,o=null,s=null,r=null,c="",a=-1!==window.location.pathname.toLowerCase().indexOf("index-voice");if(this.canUseMicrophone()&&a){n={init:function(){o=window.speechSynthesis,r=new window.SpeechSynthesisUtterance,window.speechSynthesis.onvoiceschanged=function(e){var t=o.getVoices();r.voice=t[0],r.lang=r.voice.lang},o.getVoices(),r.onstart=function(t){console.log("voice: deactivate 1"),e.cf.userInput.deactivate()},r.onend=function(t){e.cf.userInput.reactivate()},i.addEventListener(window.cf.ChatListEvents.CHATLIST_UPDATED,function(e){e.detail.currentResponse.isRobotResponse&&(r.text=e.detail.currentResponse.strippedSesponse,window.speechSynthesis.speak(r))},!1)},awaitingCallback:!0,cancelInput:function(e){console.log("voice: CANCEL"),c=null,s&&(s.onend=null,s.onerror=null,s.stop())},input:function(e,t,n){console.log("voice: INPUT"),s&&s.stop(),s=new window.SpeechRecognition,c="",s.continuous=!1,s.interimResults=!1,s.onresult=function(e){for(var t=e.resultIndex;t<e.results.length;++t)e.results[t].isFinal&&(c+=e.results[t][0].transcript)},s.onerror=function(e){t(e.error)},s.onend=function(t){c&&""!==c&&e(c)},s.start()}};var l=t.querySelector("input[type='email']");l&&l.parentNode&&l.parentNode.removeChild(l)}this.cf=new window.cf.ConversationalForm({formEl:t,eventDispatcher:i,microphoneInput:n,context:document.getElementById("cf-context"),robotImage:"data:image/svg+xml;charset=utf-8;base64,PHN2ZyB3aWR0aD0iMjBweCIgaGVpZ2h0PSIyMHB4IiB2aWV3Qm94PSIwIDAgMjAgMjAiIHZlcnNpb249IjEuMSIgeG1sbnM9Imh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnIiB4bWxuczp4bGluaz0iaHR0cDovL3d3dy53My5vcmcvMTk5OS94bGluayI+CiAgICA8ZyBzdHJva2U9Im5vbmUiIHN0cm9rZS13aWR0aD0iMSIgZmlsbD0ibm9uZSIgZmlsbC1ydWxlPSJldmVub2RkIj4KICAgICAgICA8ZyB0cmFuc2Zvcm09InRyYW5zbGF0ZSgtNzY0LjAwMDAwMCwgLTUzMC4wMDAwMDApIiBmaWxsPSIjMjIyMjIyIj4KICAgICAgICAgICAgPGcgdHJhbnNmb3JtPSJ0cmFuc2xhdGUoNzUzLjAwMDAwMCwgNTE5LjAwMDAwMCkiPgogICAgICAgICAgICAgICAgPHJlY3QgeD0iMTEiIHk9IjExIiB3aWR0aD0iMjAiIGhlaWdodD0iMjAiPjwvcmVjdD4KICAgICAgICAgICAgPC9nPgogICAgICAgIDwvZz4KICAgIDwvZz4KPC9zdmc+",userImage:"data:image/svg+xml;charset=utf-8;base64,PHN2ZyB3aWR0aD0iMjBweCIgaGVpZ2h0PSIxNnB4IiB2aWV3Qm94PSIwIDAgMjAgMTYiIHZlcnNpb249IjEuMSIgeG1sbnM9Imh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnIiB4bWxuczp4bGluaz0iaHR0cDovL3d3dy53My5vcmcvMTk5OS94bGluayI+CiAgICA8ZyBzdHJva2U9Im5vbmUiIHN0cm9rZS13aWR0aD0iMSIgZmlsbD0ibm9uZSIgZmlsbC1ydWxlPSJldmVub2RkIj4KICAgICAgICA8ZyB0cmFuc2Zvcm09InRyYW5zbGF0ZSgtMTM3MS4wMDAwMDAsIC02MTAuMDAwMDAwKSIgZmlsbD0iI0ZGRkZGRiI+CiAgICAgICAgICAgIDxnIHRyYW5zZm9ybT0idHJhbnNsYXRlKDEyNzQuMDAwMDAwLCA1OTkuMDAwMDAwKSI+CiAgICAgICAgICAgICAgICA8cG9seWdvbiBwb2ludHM9IjEwNyAxMSAxMTcgMjcgOTcgMjciPjwvcG9seWdvbj4KICAgICAgICAgICAgPC9nPgogICAgICAgIDwvZz4KICAgIDwvZz4KPC9zdmc+",submitCallback:function(){},flowStepCallback:function(t,n,i){if(t.tag&&t.tag.domElement)if("repeat"==t.tag.domElement.getAttribute("name"))location.reload();else if("submit-form"==t.tag.domElement.getAttribute("name")){var o=new XMLHttpRequest;o.addEventListener("load",function(){e.cf.addRobotChatResponse("We received your submission ðŸ™Œ"),n()}),o.open("POST",document.getElementById("cf-form").getAttribute("action")),o.setRequestHeader("accept","application/javascript"),o.setRequestHeader("Content-Type","application/json"),o.send(JSON.stringify(e.cf.getFormData(!0)))}else n();else n()}})}this.cf.focus(),setTimeout(function(){e.el.classList.remove("menu-toggle"),e.el.classList.add("cf-toggle")},10)}return!1},e.prototype.canUseMicrophone=function(){var e=!0;try{window.SpeechRecognition=window.SpeechRecognition||window.webkitSpeechRecognition}catch(t){e=!1}try{window.SpeechSynthesisUtterance=window.webkitSpeechSynthesisUtterance||window.mozSpeechSynthesisUtterance||window.msSpeechSynthesisUtterance||window.oSpeechSynthesisUtterance||window.SpeechSynthesisUtterance}catch(t){e=!1}return e},e.start=function(){e.instance||(window.conversationalFormDocs=new e)},e}(),H1Writer=function(){function e(e){this.progress=0,this.progressTarget=0,this.str="",this.strs=["...","TBD"],this.step=0,this.el=e.el,this.strs[1]=this.el.innerHTML,this.el.innerHTML="",this.el.classList.add("show")}return e.prototype.start=function(){this.progress=0,this.progressTarget=1,this.str=this.strs[this.step],this.render()},e.prototype.nextStep=function(){0==this.progressTarget&&this.step++,this.str=this.strs[this.step],this.progressTarget=0==this.progressTarget?1:0,this.render()},e.prototype.render=function(){var e=this;this.progress+=(this.progressTarget-this.progress)*(0==this.step?.15:.09);var t=this.str.substr(0,Math.round(this.progress*this.str.length));this.el.innerHTML=t,Math.abs(this.progress-this.progressTarget)<=.01?(cancelAnimationFrame(this.rAF),this.step<1&&setTimeout(function(){e.nextStep()},500)):this.rAF=window.requestAnimationFrame(function(){return e.render()})},e}();"complete"==document.readyState?ConversationalFormDocs.start():window.addEventListener("load",function(){ConversationalFormDocs.start()},!1);